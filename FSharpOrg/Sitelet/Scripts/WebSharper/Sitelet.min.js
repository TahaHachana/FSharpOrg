(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;$.Define($$,{Sitelet:{Login:{Client:{form:function(D){return c.Render(function(E){return function(F){return function(G){return f.loginRender(E,F,G);};};},c.Run(function(H){return g.Start(g.Delay(function(){return g.Bind(h.Async("Sitelet:0",[H]),function(J){if(J.$==1){i.location.assign(D);return g.Return(null);}else{j("Login failed");return g.Return(null);}});}));},f.loginPiglet($.New(k,{Username:"",Password:""}))));},loginPiglet:function(K){return c.WithSubmit(l.op_LessMultiplyGreater(l.op_LessMultiplyGreater(c.Return(function(L){return function(M){return k.New(L,M);};}),m.Is(function(N){return m.NotEmpty(N);},"Please enter your username.",c.Yield(K.Username))),m.Is(function(O){return m.NotEmpty(O);},"Please enter your password.",c.Yield(K.Password))));},loginRender:function(P,Q,R){var U,X;U=o.add(r.input("text",function(V){return V;},function(W){return W;},Q),q.ofArray([p.Attr().Class("form-control"),p.Attr().NewAttr("type","password"),s.Attr().NewAttr("placeholder","Password")]));X=function(){return function(Z){return Z.KeyCode===13?t("#submit-btn").click():null;};};u.Events().OnKeyDown(X,U);return o.add(p.Div(q.ofArray([p.Attr().Class("well"),p.Attr().NewAttr("id","login-form")])),q.ofArray([o.add(p.Div(q.ofArray([p.Attr().Class("form-group")])),q.ofArray([o.add(r.input("text",function(S){return S;},function(T){return T;},P),q.ofArray([p.Attr().Class("form-control"),p.Attr().NewAttr("type","text"),s.Attr().NewAttr("autofocus","autofocus"),s.Attr().NewAttr("required","required"),s.Attr().NewAttr("placeholder","Username")]))])),o.add(p.Div(q.ofArray([p.Attr().Class("form-group")])),q.ofArray([U])),o.add(r.SubmitValidate(R),q.ofArray([p.Attr().Class("btn btn-primary"),p.Attr().NewAttr("id","submit-btn")]))]));}},Control:$.Class({get_Body:function(){return f.form(this.redirectUrl);}}),LoginInfo:$.Class({},{New:function(_0,_1){return $.New(k,{Username:_0,Password:_1});}})},News:{Control:$.Class({get_Body:function(){return v.main();}}),main:$.Field(function(){var _2;_2=p.UL(q.ofArray([p.Attr().Class("list-group wow animated fadeIn"),p.Attr().NewAttr("id","news-list")]));t.getJSON("http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=10&callback=?&q=http%3A%2F%2Ffpish.net%2Frss%2Fblogs%2Ftag%2F1%2Ff~23",$.Tupled(function(_3){var _4,_5,_6,_7;_4=_3[0];_5=_3[1];_6=_4.responseData.feed.entries;_7=w.GetArraySlice(_6,{$:0},{$:1,$0:4});return x.iter(function(_8){var _9;_9=_8.link;return _2.AppendI(o.add(p.LI(q.ofArray([p.Attr().Class("list-group-item")])),q.ofArray([o.add(p.H4(q.ofArray([p.Attr().Class("list-group-item-heading")])),q.ofArray([p.A(q.ofArray([p.Attr().NewAttr("href",_9),p.Attr().NewAttr("target","_blank"),p.Text(_8.title)]))])),p.P(q.ofArray([p.Text(_8.contentSnippet)]))])));},_7);}));return _2;})},Shuffle:{Control:$.Class({get_Body:function(){return y.main();}}),main:function(){var _;_=p.Div($.New(z,{$:0}));o.OnAfterRender(function(){var bb,bc,bd,bf;bb=t(".carousel-link").toArray();bc=y.shuffle(bb);bd=x.map(function(be){return[be.getAttribute("href"),t(".carousel-img",be).attr("src")];},bc);bf=x.zip(bd,t(".carousel-link").toArray());x.iter($.Tupled(function(bg){var bh,bi,bj;bh=bg[0];bi=bg[1];bj=bh[1];bi.setAttribute("href",bh[0]);return t(".carousel-img",bi).attr("src",bj);}),bf);t.getJSON("testimonials.json",$.Tupled(function(bj){var bk,bl,bm,bn,bo,bs,bu;bk=bj[0];bl=bj[1];bm=y.shuffle(bk);bn=w.GetArraySlice(bm,{$:0},{$:1,$0:5});bo=x.map(function(bp){var bq,br;br=q.ofArray([p.A(q.ofArray([p.HRef(bp.Permalink),p.Text(bp.Author)]))]);bq=q.ofArray([p.P(q.ofArray([p.A(q.ofArray([p.HRef(bp.Permalink),p.Attr().Class("testimonial"),p.Text(bp.Text)]))])),s.Tags().NewTag("footer",q.ofArray([p.Tags().NewTag("cite",br)]))]);return p.Tags().NewTag("blockquote",bq);},bn);bs=t("#testimonials-col-1").empty();x.iter(function(bt){bs.append(bt.Body);},w.GetArraySlice(bo,{$:0},{$:1,$0:2}));bu=t("#testimonials-col-2").empty();return x.iter(function(bv){bu.append(bv.Body);},w.GetArraySlice(bo,{$:1,$0:3},{$:0}));}));return;},_);return _;},shuffle:function(bw){var bx,by,bz;bx={contents:A.GetLength(bw)};while(bx.contents!==0){by=B.floor(B.random()*C(bx.contents));bx.contents=bx.contents-1;bz=bw[bx.contents];bw[bx.contents]=bw[by];bw[by]=bz;}return bw;}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Piglets);c=$.Safe(b.Piglet1);d=$.Safe($$.Sitelet);e=$.Safe(d.Login);f=$.Safe(e.Client);g=$.Safe(a.Concurrency);h=$.Safe(a.Remoting);i=$.Safe($$.window);j=$.Safe($$.alert);k=$.Safe(e.LoginInfo);l=$.Safe(b.Pervasives);m=$.Safe(c.Validation);n=$.Safe(a.Html);o=$.Safe(n.Operators);p=$.Safe(n.Default);q=$.Safe(a.List);r=$.Safe(b.Controls);s=$.Safe(p.HTML5);t=$.Safe($$.jQuery);u=$.Safe(n.EventsPervasives);v=$.Safe(d.News);w=$.Safe(a.OperatorIntrinsics);x=$.Safe(a.Arrays);y=$.Safe(d.Shuffle);z=$.Safe(q.T);A=$.Safe(a.IntrinsicFunctionProxy);B=$.Safe($$.Math);return C=$.Safe($$.Number);});$.OnLoad(function(){v.main();return;});}());
